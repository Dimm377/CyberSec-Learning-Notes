# Metasploit: Meterpreter

---

- **Room Link:** [Metasploit: Meterpreter](https://tryhackme.com/room/meterpreter)
- **Category:** Exploitation Basics
- **Difficulty:** Easy

---

## Introduction to Meterpreter

**Meterpreter** itu payload canggih dari Metasploit yang jalan di memory (in-memory) target.

**Keunggulan:**
1.  **Stealthy:** Jalan di RAM, tidak nulis file ke disk (kecuali kita suruh), jadi susah dideteksi Antivirus standar.
2.  **Encrypted:** Komunikasi antara attacker dan victim dienkripsi (TLS).
3.  **Powerful:** Bisa upload/download file, dump password, nyalain kamera/mic, pivoting, dll.

---

## Meterpreter Flavors

Meterpreter punya banyak varian tergantung target OS dan cara kerjanya.

**Based on Platform:**
- Windows, Linux, Android, macOS, PHP, Python, Java.

**Inline vs Staged:**
- **Inline (Single):** Payload utuh dikirim sekaligus. Lebih stabil tapi ukurannya besar.
- **Staged:** Dikirim bertahap.
  1.  **Stager (Stage 0):** Kode kecil buat connect balik ke attacker.
  2.  **Stage (Stage 1):** Payload Meterpreter utuh didownload dan dijalanin di memori. Ukuran awal kecil, bagus buat bypass batasan buffer size exploit.

---

## Meterpreter Commands

Setelah berhasil masuk (dapet sesi `meterpreter >`), kita bisa pakai banyak command. Ketik `help` buat melihat semuanya.

**Core Commands:**
- `background`: Taruh sesi ke background (balik ke msfconsole).
- `exit`: Tutup sesi.
- `guid`: Melihat Global UID sesi.
- `help`: Menu bantuan.
- `info`: Info tentang module post-exploitation.
- `irb`: Masuk ke mode scripting Ruby.
- `migrate`: Pindah ke proses lain (PENTING buat persistensi & stabilitas!).

**File System Commands:**
- `cd` / `ls` / `pwd`: Navigasi folder.
- `download [file]`: Download file dari target ke mesin kita.
- `upload [file]`: Upload file dari mesin kita ke target.
- `search -f [nama_file]`: Mencari file di seluruh sistem.

---

## Post-Exploitation with Meterpreter

Fase setelah berhasil masuk. Di sini kita ngumpulin informasi, eskalasi privilege, atau pivoting.

**Perintah Wajib Tau:**
1.  **`getuid`**: Siapa user kita sekarang?
    - Output: `Server username: NT AUTHORITY\SYSTEM` (Target utama kita!).
2.  **`sysinfo`**: Informasi sistem (OS, Architecture, Domain, Computer Name).
3.  **`getpid`**: Melihat Process ID (PID) meterpreter kita saat ini.
4.  **`ps`**: Melihat daftar proses yang jalan.
    - Berguna buat mencari target `migrate`. Sebaiknya migrate ke proses stabil seperti `explorer.exe` atau `lsass.exe`.
5.  **`hashdump`**: Mengambil hash password user (NTLM). Butuh privilege SYSTEM.
6.  **`shell`**: Masuk ke command prompt (CMD/Bash) native target.
7.  **`load [module]`**: Nge-load ekstensi tambahan, misal `load kiwi` (Mimikatz).

---

## Post-Exploitation Challenge

Mari praktikkin command di atas di mesin target!

**Cheat Sheet Jawaban:**

- **What is the computer name?**
  - **Answer:** ?

- **What is the domain name?**
  - **Answer:** ?

- **What is the name of the share?**
  - **Answer:** ?

- **What is the NTLM hash of the user?**
  - **Answer:** ?

- **What is the Process ID of "explorer.exe"?**
  - **Answer:** ?

Happy Hacking! üïµÔ∏è‚Äç‚ôÇÔ∏è
